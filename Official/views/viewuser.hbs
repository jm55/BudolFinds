<link rel="stylesheet" href="/css/post.css">
<link rel="stylesheet" href="/css/profile.css">

<script src="/js/banner.js"></script>
<script src="/js/profile.js"></script>

<header class="card brand_banner">
    <div class="banner_left">
        {{>bannertitle}}
        <nav class="menu">
            <button id="home-btn" class="menu_button">Home</button>
            {{>menu_categories}}
            <input id="search-txt" name="search-txt" class="textfield" />
            <button id="search-btn" class="menu_button">Search</button>
            <button id="account-settings-btn" class="menu_button">Settings</button>
            <button id="logout-btn" class="menu_button">Logout</button>
        </nav>
    </div>
    <div class="banner_right">
        <a id="userbutton"><img onerror="this.src='/img/default/imagenotfound.webp'" loading='lazy'  id="profile-pic" class="profilepic" src='{{#if currentUser.profilepic}}{{currentUser.profilepic}}{{else}}"../img/default/default_dp.webp"{{/if}}'></a>
    </div>
</header>

{{#if targetUser}}
    <div class="card" style="display: flex; width: 90%; margin: 0px auto 20px auto;">
        <span style="width: 15%; margin-right: 4%;">
            <img onerror="this.src='/img/default/imagenotfound.webp'" loading='lazy'  style="max-height: 200px !important; margin-left: auto; margin-right: auto;" src="{{targetUser.profilepic}}">
            <h1>{{targetUser.username}}</h1>
        </span>
        <span style="width: 16%; margin-right: 4%;">
            <label>Name: </label>
            <p>{{fullName targetUser.fname targetUser.mname targetUser.lname}}</p>
            <label>Name: </label>
            <p>{{targetUser.gender}}</p>
            <label>Email: </label>
            <p>{{targetUser.email}}</p>
        </span>
        <span style="width: 56%;height: 250px;">
            <label>Link to Account: </label>
            <p><a href="/user/{{targetUser.username}}">{{targetUser.username}}</a></p>
            <label>Bio: </label>
            <p>{{targetUser.bio}}</p>
        </span> 
        <span style="width: 17%;">
            <div>
                <p>Post Count:</p>
                <h2>{{postCount}}</h2>
                <br>
                <p>Report Count:</p>
                <h2>{{reportCount}}</h2>
            </div>
        </span>        
    </div>

    <div class="container">
        <div class="timeline">
            {{#if posts}}  
            {{#each posts}}
                {{>postcards}}
            {{/each}}
            {{else}}
                {{>notfound}}
            {{/if}}
        </div> <!--END OF TIMELINE-->
    </div>
{{else}}
{{>notfound}}
{{/if}}

<script>
    userId = {{currentUser.userId}};
    username = '{{currentUser.username}}';
</script>